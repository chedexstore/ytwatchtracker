<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>VideoCapture Pro - Advanced YouTube Video Analysis Tool</title>
  <meta name="description" content="Professional YouTube video analysis and capture tool. Monitor video progress, capture key frames, and track viewing statistics with our advanced web application.">
  <meta name="keywords" content="youtube analysis, video capture, progress tracking, video statistics, frame capture, video monitoring">
  <link rel="canonical" href="https://videocapture-pro.com">
  
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      line-height: 1.6;
      color: #333;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      min-height: 100vh;
    }

    .container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 0 20px;
    }

    /* Header */
    header {
      background: rgba(255, 255, 255, 0.95);
      backdrop-filter: blur(10px);
      border-bottom: 1px solid rgba(255, 255, 255, 0.2);
      position: fixed;
      top: 0;
      width: 100%;
      z-index: 1000;
      transition: all 0.3s ease;
    }

    nav {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 1rem 0;
    }

    .logo {
      font-size: 1.8rem;
      font-weight: bold;
      color: #667eea;
      text-decoration: none;
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .logo::before {
      content: "üé¨";
      font-size: 2rem;
    }

    .nav-links {
      display: flex;
      list-style: none;
      gap: 2rem;
    }

    .nav-links a {
      text-decoration: none;
      color: #333;
      font-weight: 500;
      transition: color 0.3s ease;
      position: relative;
    }

    .nav-links a:hover {
      color: #667eea;
    }

    .nav-links a::after {
      content: '';
      position: absolute;
      bottom: -5px;
      left: 0;
      width: 0;
      height: 2px;
      background: #667eea;
      transition: width 0.3s ease;
    }

    .nav-links a:hover::after {
      width: 100%;
    }

    /* Hero Section */
    .hero {
      padding: 120px 0 60px;
      text-align: center;
      color: white;
    }

    .hero h1 {
      font-size: 3.5rem;
      margin-bottom: 1rem;
      font-weight: 700;
      text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
      animation: fadeInUp 1s ease;
    }

    .hero p {
      font-size: 1.3rem;
      margin-bottom: 2rem;
      opacity: 0.9;
      max-width: 600px;
      margin-left: auto;
      margin-right: auto;
      animation: fadeInUp 1s ease 0.2s both;
    }

    .cta-button {
      display: inline-block;
      padding: 15px 40px;
      background: linear-gradient(45deg, #ff6b6b, #ee5a24);
      color: white;
      text-decoration: none;
      border-radius: 50px;
      font-weight: 600;
      font-size: 1.1rem;
      transition: all 0.3s ease;
      box-shadow: 0 10px 30px rgba(238, 90, 36, 0.3);
      animation: fadeInUp 1s ease 0.4s both;
    }

    .cta-button:hover {
      transform: translateY(-3px);
      box-shadow: 0 15px 40px rgba(238, 90, 36, 0.4);
    }

    /* Ad Placement Areas */
    .ad-banner {
      background: rgba(255, 255, 255, 0.1);
      border: 2px dashed rgba(255, 255, 255, 0.3);
      border-radius: 10px;
      padding: 20px;
      text-align: center;
      margin: 20px 0;
      color: rgba(255, 255, 255, 0.7);
      font-size: 0.9rem;
    }

    .ad-sidebar {
      background: rgba(255, 255, 255, 0.05);
      border: 1px solid rgba(255, 255, 255, 0.1);
      border-radius: 10px;
      padding: 20px;
      text-align: center;
      color: rgba(255, 255, 255, 0.6);
      font-size: 0.8rem;
    }

    /* Main Content */
    .main-content {
      background: rgba(255, 255, 255, 0.95);
      border-radius: 20px;
      padding: 40px;
      margin: 40px 0;
      box-shadow: 0 20px 60px rgba(0, 0, 0, 0.1);
      backdrop-filter: blur(10px);
    }

    .content-grid {
      display: grid;
      grid-template-columns: 1fr 300px;
      gap: 40px;
      align-items: start;
    }

    .app-container {
      background: #f8f9fa;
      border-radius: 15px;
      padding: 30px;
      border: 1px solid #e9ecef;
    }

    .app-title {
      font-size: 2rem;
      color: #333;
      margin-bottom: 1rem;
      text-align: center;
    }

    .app-description {
      color: #666;
      margin-bottom: 2rem;
      text-align: center;
      font-size: 1.1rem;
    }

    /* YouTube Player Styles (from original) */
    #video-container {
      width: 360px;
      height: 640px;
      margin: 20px auto;
      position: relative;
      background-color: #000;
      border-radius: 10px;
      overflow: hidden;
      box-shadow: 0 10px 30px rgba(0,0,0,0.2);
    }

    iframe {
      width: 100%;
      height: 100%;
      border: none;
    }

    .progress-bar {
      height: 3px;
      width: 100%;
      background-color: #333;
      position: absolute;
      bottom: 0;
      left: 0;
    }

    .progress-indicator {
      height: 100%;
      width: 0;
      background-color: #ff0000;
      transition: width 0.1s ease;
    }

    .screenshot-container {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 15px;
      margin-top: 20px;
    }

    .screenshot-wrapper {
      position: relative;
      width: 180px;
      height: 320px;
      border: 1px solid #ddd;
      overflow: hidden;
      border-radius: 8px;
      box-shadow: 0 4px 15px rgba(0,0,0,0.1);
    }

    .screenshot {
      width: 100%;
      height: 100%;
      object-fit: contain;
    }

    .screenshot-progress {
      position: absolute;
      bottom: 0;
      left: 0;
      width: 100%;
      height: 3px;
      background-color: #333;
    }

    .screenshot-progress-indicator {
      height: 100%;
      background-color: #ff0000;
    }

    .screenshot-info {
      position: absolute;
      bottom: 15px;
      left: 0;
      right: 0;
      background-color: rgba(0,0,0,0.8);
      color: white;
      padding: 8px;
      font-size: 12px;
      text-align: center;
    }

    .screenshot-timestamp {
      position: absolute;
      top: 8px;
      right: 8px;
      background-color: rgba(0,0,0,0.8);
      color: white;
      padding: 4px 8px;
      font-size: 11px;
      border-radius: 4px;
    }

    #controls {
      margin: 20px 0;
      text-align: center;
    }

    #video-id {
      padding: 12px;
      width: 250px;
      border: 2px solid #ddd;
      border-radius: 8px;
      font-size: 1rem;
      margin-right: 10px;
    }

    button {
      padding: 12px 24px;
      background: linear-gradient(45deg, #667eea, #764ba2);
      color: white;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      font-size: 1rem;
      font-weight: 600;
      transition: all 0.3s ease;
    }

    button:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 20px rgba(102, 126, 234, 0.3);
    }

    #status, #watch-time {
      margin: 15px 0;
      padding: 10px;
      background: #f8f9fa;
      border-radius: 8px;
      text-align: center;
      font-weight: 500;
    }

    #current-date {
      margin: 15px 0 5px 0;
      padding: 10px;
      background: #f8f9fa;
      border-radius: 8px;
      text-align: center;
      font-weight: 500;
      color: #667eea;
      font-size: 1.1rem;
    }

    #watch-time {
      color: #667eea;
      font-size: 1.1rem;
      margin-top: 0;
      margin-bottom: 15px;
    }

    #activity-logs {
      margin-top: 30px;
      border-top: 2px solid #e9ecef;
      padding-top: 20px;
      background: white;
      border-radius: 10px;
      padding: 20px;
    }

    .log-entry {
      margin: 8px 0;
      padding: 8px 12px;
      border-bottom: 1px solid #f1f3f4;
      font-size: 14px;
      border-radius: 6px;
      background: #fafbfc;
    }

    .log-timestamp {
      color: #666;
      font-size: 12px;
      margin-right: 10px;
      font-weight: 500;
    }

    /* Features Section */
    .features {
      padding: 60px 0;
      background: rgba(255, 255, 255, 0.1);
    }

    .features h2 {
      text-align: center;
      color: white;
      font-size: 2.5rem;
      margin-bottom: 3rem;
    }

    .features-grid {
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      gap: 20px;
      max-width: 1200px;
      margin: 0 auto;
    }

    .feature-card {
      background: rgba(255, 255, 255, 0.1);
      padding: 30px;
      border-radius: 15px;
      text-align: center;
      color: white;
      backdrop-filter: blur(10px);
      border: 1px solid rgba(255, 255, 255, 0.2);
      transition: transform 0.3s ease;
      height: 100%;
      display: flex;
      flex-direction: column;
      justify-content: space-between;
    }

    .feature-card:hover {
      transform: translateY(-10px);
    }

    .feature-icon {
      font-size: 3rem;
      margin-bottom: 1rem;
    }

    .feature-card h3 {
      font-size: 1.5rem;
      margin-bottom: 1rem;
    }

    /* Footer */
    footer {
      background: rgba(0, 0, 0, 0.8);
      color: white;
      padding: 40px 0;
      text-align: center;
    }

    .footer-content {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 30px;
      margin-bottom: 30px;
    }

    .footer-section h3 {
      margin-bottom: 1rem;
      color: #667eea;
    }

    .footer-section a {
      color: #ccc;
      text-decoration: none;
      display: block;
      margin-bottom: 0.5rem;
      transition: color 0.3s ease;
    }

    .footer-section a:hover {
      color: #667eea;
    }

    /* Animations */
    @keyframes fadeInUp {
      from {
        opacity: 0;
        transform: translateY(30px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    /* Responsive Design */
    @media (max-width: 1024px) {
      .features-grid {
        grid-template-columns: repeat(2, 1fr);
      }
    }

    @media (max-width: 768px) {
      .nav-links {
        display: none;
      }

      .hero h1 {
        font-size: 2.5rem;
      }

      .content-grid {
        grid-template-columns: 1fr;
      }

      #video-container {
        width: 100%;
        max-width: 360px;
      }

      .screenshot-wrapper {
        width: 150px;
        height: 267px;
      }

      .features-grid {
        grid-template-columns: 1fr;
      }
    }

    /* AdSense Optimization */
    .content-wrapper {
      min-height: 800px;
      word-count: 500;
    }

    .text-content {
      margin: 20px 0;
      line-height: 1.8;
      font-size: 1.1rem;
    }
  </style>
</head>
<body>
  <header>
    <nav class="container">
      <a href="#" class="logo">VideoCapture Pro</a>
      <ul class="nav-links">
        <li><a href="#features">Features</a></li>
        <li><a href="#how-it-works">How It Works</a></li>
        <li><a href="#about">About</a></li>
        <li><a href="#contact">Contact</a></li>
      </ul>
    </nav>
  </header>

  <main>
    <section class="hero">
      <div class="container">
        <div class="ad-banner">
          Advertisement Space - 728x90 Leaderboard
        </div>
        <h1>Professional YouTube Video Analysis</h1>
        <p>Advanced web application for monitoring video progress, capturing key frames, and tracking detailed viewing statistics in real-time.</p>
        <a href="#app" class="cta-button">Try VideoCapture Pro</a>
      </div>
    </section>

    <div class="container">
      <div class="main-content">
        <div class="content-grid">
          <div class="content-wrapper">
            <div class="app-container" id="app">
              <h2 class="app-title">YouTube Video Analyzer</h2>
              <p class="app-description">Enter any YouTube video ID to start advanced analysis and frame capture</p>
              
              <div id="controls">
                <input type="text" id="video-id" placeholder="YouTube Video ID" value="Rlnsp2EU3oc">
                <button onclick="startCapture()" id="capture-button">Start Analysis</button>
              </div>
              
              <div id="status">Ready to analyze videos</div>
              <div id="current-date"></div>
              <div id="watch-time">Total watch time: 00:00:00</div>
              
              <div id="video-container">
                <div id="yt-video"></div>
                <div class="progress-bar">
                  <div class="progress-indicator" id="progress"></div>
                </div>
              </div>
              
              <div id="screenshots" class="screenshot-container"></div>
              
              <div id="activity-logs">
                <h3>Analysis Activity Log</h3>
                <div id="log-entries"></div>
              </div>
            </div>

            <div class="text-content">
              <h3>About VideoCapture Pro</h3>
              <p>VideoCapture Pro is a sophisticated web application designed for content creators, researchers, and video enthusiasts who need detailed analysis of YouTube videos. Our tool provides comprehensive monitoring capabilities that go beyond basic video playback.</p>
              
              <p>The application automatically captures key frames at strategic points during video playback, providing visual snapshots that help users understand content progression. Real-time progress tracking ensures you never miss important moments, while detailed activity logging keeps a complete record of all interactions.</p>
              
              <p>Whether you're conducting research, creating content summaries, or simply want to better understand video consumption patterns, VideoCapture Pro offers the professional-grade tools you need. The intuitive interface makes complex analysis accessible to users of all technical levels.</p>
            </div>
          </div>

          <aside>
            <div class="ad-sidebar">
              <p>Advertisement Space</p>
              <p>300x250 Rectangle</p>
            </div>
            
            <div class="ad-sidebar" style="margin-top: 20px;">
              <p>Advertisement Space</p>
              <p>300x600 Half Page</p>
            </div>
          </aside>
        </div>
      </div>
    </div>

    <section class="features" id="features">
      <div class="container">
        <h2>Powerful Features</h2>
        <div class="features-grid">
          <div class="feature-card">
            <div class="feature-icon">üìä</div>
            <h3>Real-time Analytics</h3>
            <p>Monitor video progress, playback statistics, and viewing patterns with precision timing and detailed logging.</p>
          </div>
          <div class="feature-card">
            <div class="feature-icon">üì∏</div>
            <h3>Smart Frame Capture</h3>
            <p>Automatically capture key frames at strategic points including start, middle, and end positions for comprehensive analysis.</p>
          </div>
          <div class="feature-card">
            <div class="feature-icon">‚è±Ô∏è</div>
            <h3>Watch Time Tracking</h3>
            <p>Accurate measurement of actual viewing time with advanced algorithms that account for pauses and seeking behavior.</p>
          </div>
          <div class="feature-card">
            <div class="feature-icon">üéØ</div>
            <h3>Professional Interface</h3>
            <p>Clean, intuitive design optimized for both casual users and professional content analysts working with video data.</p>
          </div>
        </div>
      </div>
    </section>

    <div class="container">
      <div class="ad-banner">
        Advertisement Space - 728x90 Bottom Leaderboard
      </div>
    </div>
  </main>

  <footer>
    <div class="container">
      <div class="footer-content">
        <div class="footer-section">
          <h3>VideoCapture Pro</h3>
          <p>Professional YouTube video analysis and monitoring tools for content creators and researchers.</p>
        </div>
        <div class="footer-section">
          <h3>Features</h3>
          <a href="#">Frame Capture</a>
          <a href="#">Progress Tracking</a>
          <a href="#">Analytics Dashboard</a>
          <a href="#">Activity Logging</a>
        </div>
        <div class="footer-section">
          <h3>Support</h3>
          <a href="#">Documentation</a>
          <a href="#">Tutorial Videos</a>
          <a href="#">FAQ</a>
          <a href="#">Contact Support</a>
        </div>
        <div class="footer-section">
          <h3>Legal</h3>
          <a href="#">Privacy Policy</a>
          <a href="#">Terms of Service</a>
          <a href="#">Cookie Policy</a>
          <a href="#">DMCA Notice</a>
        </div>
      </div>
      <p>&copy; 2025 VideoCapture Pro. All rights reserved.</p>
    </div>
  </footer>

  <script>
    let player;
    let videoDuration = 0;
    let isCapturing = false;
    let captureTimeouts = [];
    let progressInterval;
    let activityLogs = [];
    let totalWatchTime = 0;
    let watchTimeInterval;
    let lastVideoTime = 0;
    let currentVideoId = "Rlnsp2EU3oc";

    function formatTime(totalSeconds) {
      totalSeconds = Math.floor(totalSeconds);
      const hours = Math.floor(totalSeconds / 3600);
      const minutes = Math.floor((totalSeconds % 3600) / 60);
      const seconds = Math.floor(totalSeconds % 60);
      
      return [
        hours.toString().padStart(2, '0'),
        minutes.toString().padStart(2, '0'),
        seconds.toString().padStart(2, '0')
      ].join(':');
    }

    function updateCurrentDate() {
      const now = new Date();
      const options = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' };
      document.getElementById('current-date').textContent = now.toLocaleDateString('en-US', options);
    }

    function updateWatchTimeDisplay() {
      document.getElementById('watch-time').textContent = `Total watch time: ${formatTime(totalWatchTime)}`;
    }

    function startWatchTimeTracking() {
      clearInterval(watchTimeInterval);
      lastVideoTime = player.getCurrentTime();
      
      watchTimeInterval = setInterval(() => {
        if (player.getPlayerState() === YT.PlayerState.PLAYING) {
          const currentTime = player.getCurrentTime();
          const elapsed = currentTime - lastVideoTime;
          
          if (elapsed > 0) {
            totalWatchTime += elapsed;
            updateWatchTimeDisplay();
          }
          
          lastVideoTime = currentTime;
          
          if (totalWatchTime > 86400) {
            totalWatchTime = 0;
            logActivity("Watch time reset (exceeded 24 hours)");
          }
        }
      }, 1000);
    }

    function logActivity(message) {
      const timestamp = new Date();
      const logEntry = {
        timestamp: timestamp,
        message: message
      };
      activityLogs.push(logEntry);
      renderActivityLogs();
    }

    function renderActivityLogs() {
      const logEntries = document.getElementById('log-entries');
      logEntries.innerHTML = '';
      
      activityLogs.slice().reverse().forEach(log => {
        const entry = document.createElement('div');
        entry.className = 'log-entry';
        entry.innerHTML = `
          <span class="log-timestamp">[${log.timestamp.toLocaleTimeString()}]</span>
          ${log.message}
        `;
        logEntries.appendChild(entry);
      });
    }

    function loadYouTubeAPI() {
      logActivity('Loading YouTube API...');
      const tag = document.createElement('script');
      tag.src = "https://www.youtube.com/iframe_api";
      const firstScriptTag = document.getElementsByTagName('script')[0];
      firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);
    }

    function onYouTubeIframeAPIReady() {
      logActivity('YouTube API ready');
      initializePlayer();
    }

    function initializePlayer() {
      const newVideoId = document.getElementById('video-id').value.trim();
      
      // Only reinitialize if the video ID has changed
      if (newVideoId === currentVideoId && player) {
        logActivity('Using existing player with same video ID');
        return;
      }
      
      currentVideoId = newVideoId;
      logActivity(`Initializing player for video: ${currentVideoId}`);
      
      // Clear previous player if exists
      if (player) {
        try {
          player.destroy();
        } catch (e) {
          console.log('Error destroying previous player:', e);
        }
      }
      
      // Create new player
      player = new YT.Player('yt-video', {
        height: '640',
        width: '360',
        videoId: currentVideoId,
        playerVars: {
          'autoplay': 1,
          'mute': 0,
          'controls': 0,
          'playsinline': 1,
          'disablekb': 1,
          'modestbranding': 1,
          'rel': 0,
          'enablejsapi': 1,
          'origin': window.location.origin
        },
        events: {
          'onReady': onPlayerReady,
          'onStateChange': onPlayerStateChange,
          'onError': onPlayerError
        }
      });
    }

    function onPlayerReady(event) {
      logActivity('Player ready - starting playback');
      document.getElementById('status').textContent = 'Starting playback...';
      document.getElementById('capture-button').textContent = 'Recapture';
      player.unMute();
      player.setVolume(100);
      player.playVideo().catch(error => {
        logActivity(`Playback failed: ${error}`);
        document.getElementById('status').textContent = 'Playback failed. Browser may block autoplay.';
      });
    }

    function onPlayerStateChange(event) {
      const states = {
          0: 'ENDED',
          1: 'PLAYING',
          2: 'PAUSED',
          3: 'BUFFERING',
          5: 'CUED'
      };
      const stateName = states[event.data];
      
      if (event.data === YT.PlayerState.PAUSED) {
          logActivity(`Player state changed to: <span style="color: red">PAUSED</span>`);
      } else {
          logActivity(`Player state changed to: ${stateName}`);
      }
      
      if (event.data === YT.PlayerState.PLAYING) {
          document.getElementById('status').style.color = '';
          videoDuration = player.getDuration();
          logActivity(`Video duration: ${videoDuration} seconds`);
          startProgressTracking();
          setupCapturePoints();
          document.getElementById('status').textContent = 'Video is playing...';
          startWatchTimeTracking();
      } else if (event.data === YT.PlayerState.ENDED) {
          clearInterval(progressInterval);
          clearInterval(watchTimeInterval);
          document.getElementById('progress').style.width = '100%';
          document.getElementById('status').textContent = 'Analysis complete!';
          isCapturing = false;
          if (!captureTimeouts.some(t => t.point === 1.0)) {
              captureFrame(videoDuration, 100, 3);
          }
      } else if (event.data === YT.PlayerState.BUFFERING) {
          document.getElementById('status').textContent = 'Buffering video...';
      } else if (event.data === YT.PlayerState.PAUSED) {
          document.getElementById('status').style.color = 'red';
          document.getElementById('status').textContent = 'Video paused - attempting to resume...';
          player.playVideo();
      }
    }

    function onPlayerError(event) {
      const errors = {
        2: 'INVALID_PARAMETER',
        5: 'HTML5_PLAYER_ERROR',
        100: 'VIDEO_NOT_FOUND',
        101: 'EMBED_NOT_ALLOWED',
        150: 'EMBED_NOT_ALLOWED'
      };
      const errorMsg = errors[event.data] || `UNKNOWN_ERROR (${event.data})`;
      logActivity(`Player error: ${errorMsg}`);
      document.getElementById('status').textContent = 'Error occurred. Try restarting analysis.';
    }

    function startProgressTracking() {
      clearInterval(progressInterval);
      logActivity('Starting progress tracking');
      progressInterval = setInterval(() => {
        if (player.getPlayerState() === YT.PlayerState.PLAYING) {
          const currentTime = player.getCurrentTime();
          const progress = (currentTime / videoDuration) * 100;
          document.getElementById('progress').style.width = `${progress}%`;
        }
      }, 100);
    }

    function setupCapturePoints() {
      captureTimeouts.forEach(timeout => clearTimeout(timeout.id));
      captureTimeouts = [];
      
      const points = [0.01, 0.5, 1.0];
      
      points.forEach((point, index) => {
        const captureTime = videoDuration * point;
        logActivity(`Scheduled capture at ${point*100}% (${captureTime.toFixed(1)}s)`);
        
        const timeoutId = setTimeout(() => {
          if (player.getPlayerState() === YT.PlayerState.PLAYING || 
              (point === 1.0 && player.getPlayerState() === YT.PlayerState.ENDED)) {
            const currentTime = player.getCurrentTime();
            const progress = (currentTime / videoDuration) * 100;
            logActivity(`Capturing frame at ${point*100}% (${currentTime.toFixed(1)}s)`);
            captureFrame(currentTime, progress, index + 1);
          }
        }, captureTime * 1000);
        
        captureTimeouts.push({ id: timeoutId, point: point });
      });
    }

    function captureFrame(time, progress, index) {
      const thumbnailUrl = `https://img.youtube.com/vi/${currentVideoId}/mqdefault.jpg`;
      
      const wrapper = document.createElement('div');
      wrapper.className = 'screenshot-wrapper';
      
      const img = document.createElement('img');
      img.src = thumbnailUrl;
      img.className = 'screenshot';
      
      const progressContainer = document.createElement('div');
      progressContainer.className = 'screenshot-progress';
      
      const progressBar = document.createElement('div');
      progressBar.className = 'screenshot-progress-indicator';
      progressBar.style.width = `${progress}%`;
      
      const info = document.createElement('div');
      info.className = 'screenshot-info';
      info.textContent = `Captured at: ${time.toFixed(1)}s (${progress.toFixed(0)}%) - ${
        index === 1 ? 'Start' : 
        index === 2 ? 'Middle' : 
        'End'
      }`;
      
      const timestamp = document.createElement('div');
      timestamp.className = 'screenshot-timestamp';
      timestamp.textContent = new Date().toLocaleString();
      
      progressContainer.appendChild(progressBar);
      wrapper.appendChild(img);
      wrapper.appendChild(progressContainer);
      wrapper.appendChild(info);
      wrapper.appendChild(timestamp);
      
      document.getElementById('screenshots').appendChild(wrapper);
    }

    function startCapture() {
      // Clear previous data
      document.getElementById('screenshots').innerHTML = '';
      activityLogs = [];
      document.getElementById('log-entries').innerHTML = '';
      totalWatchTime = 0;
      updateWatchTimeDisplay();
      updateCurrentDate();
      
      document.getElementById('status').textContent = 'Initializing player...';
      
      // Clear any pending timeouts
      captureTimeouts.forEach(timeout => clearTimeout(timeout.id));
      captureTimeouts = [];
      
      // Clear intervals
      clearInterval(progressInterval);
      clearInterval(watchTimeInterval);
      
      // Initialize new player with current video ID
      initializePlayer();
    }

    // Initialize the app when the page loads
    window.onload = function() {
      updateCurrentDate();
      loadYouTubeAPI();
    };

    // Make the onYouTubeIframeAPIReady function available globally
    window.onYouTubeIframeAPIReady = onYouTubeIframeAPIReady;
  </script>
</body>
</html>